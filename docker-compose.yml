# Hostinger: só o backend. Banco = Supabase (não usa container Postgres).
# No painel "Ambiente", defina DATABASE_URL com a connection string do Supabase
# (ex.: postgresql://postgres.[ref]:[SENHA]@aws-0-[regiao].pooler.supabase.com:5432/postgres).
# Obrigatório: DATABASE_URL, CORS_ORIGIN, JWT_ACCESS_SECRET, JWT_REFRESH_SECRET.

services:
  backend:
    image: snnap/familia-backend:latest
    container_name: familia-backend
    restart: unless-stopped
    environment:
      DATABASE_URL: ${DATABASE_URL}
      PORT: 3000
      CORS_ORIGIN: ${CORS_ORIGIN:-http://localhost:8080}
      JWT_ACCESS_SECRET: ${JWT_ACCESS_SECRET}
      JWT_REFRESH_SECRET: ${JWT_REFRESH_SECRET}
      JWT_ACCESS_EXPIRES_IN: ${JWT_ACCESS_EXPIRES_IN:-30d}
      JWT_REFRESH_EXPIRES_IN: ${JWT_REFRESH_EXPIRES_IN:-30d}
      THROTTLE_TTL_MS: ${THROTTLE_TTL_MS:-60000}
      THROTTLE_LIMIT: ${THROTTLE_LIMIT:-100}
      APP_FRONTEND_URL: ${APP_FRONTEND_URL:-}
      ADMIN_SETUP_SECRET: ${ADMIN_SETUP_SECRET:-}
      WEBHOOK_SECRET: ${WEBHOOK_SECRET:-}
    ports:
      - "${BACKEND_PORT:-3000}:3000"
